<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Weapon Wizards – Wybór broni</title>
<style>
:root{--bg:#000;--txt:#fff;--pri:#00aaff;}
*{box-sizing:border-box;margin:0;padding:0}
body{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;background:var(--bg);color:var(--txt);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;text-align:center;padding:24px;}
.logo{width:800px;max-width:90vw;height:auto;margin-bottom:30px;}
h1{font-size:clamp(22px, 4vw, 32px); margin-bottom: 40px; color: var(--pri); letter-spacing: 1px;}
.icon-row{display:flex;gap:32px;flex-wrap:wrap;justify-content:center}
.icon-row a{display:block;border-radius:24px;background:#111;padding:32px;transition:.25s}
.icon-row img{width:160px;height:160px;object-fit:contain}
.icon-row a:hover{transform:scale(1.05);box-shadow:0 0 12px var(--pri)}
#preload-overlay{position:fixed;inset:0;background:#000e;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;}
#preload-box{width:60%;max-width:420px;border:1px solid #444}
#preload-bar{width:0;height:8px;background:var(--pri);transition:width .25s}
#preload-text{margin-top:12px;font-size:14px;color:var(--txt)}
.hidden{display:none}
@media(max-width:600px){
  .icon-row img{width:120px;height:120px}
  .icon-row{gap:20px}
}
#lang-select{position:fixed;inset:0;background:#000e;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:24px;z-index:2000;}
.lang-btn{width:120px;height:80px;border:3px solid #fff;border-radius:8px;cursor:pointer;transition:.25s;background-size:cover;background-position:center;}
.lang-btn:hover{transform:scale(1.1);box-shadow:0 0 12px #fff;}
</style>
</head>
<body>

  <div id="lang-select">
    <div id="lang-pl" class="lang-btn" style="background-image:url('https://flagicons.lipis.dev/flags/4x3/pl.svg');"></div>
    <div id="lang-en" class="lang-btn" style="background-image:url('https://flagicons.lipis.dev/flags/4x3/gb.svg');"></div>
  </div>

<div id="preload-overlay">
  <div id="preload-box"><div id="preload-bar"></div></div>
  <div id="preload-text">Ładowanie 0%</div>
</div>

<img src="img/other/logo.png" alt="Weapon Wizards Customs" class="logo">
<h1 id="choose-heading">WYBIERZ RODZAJ BRONI</h1>

<div class="icon-row">
  <a id="btn-pistol" href="pistol.html"><img src="img/other/icon_pistol.png" alt="Pistolet"></a>
  <a id="btn-rifle" href="rifle.html"><img src="img/other/icon_rifle.png" alt="Karabin"></a>
  <a id="btn-shotgun" href="shotgun.html"><img src="img/other/icon_shotgun.png" alt="Strzelba"></a>
</div>

<script>
document.addEventListener("DOMContentLoaded",()=>{
  const assets=[
    // Glock Widok 1
    'img/pistols/glock/01/glock1.png', 'img/pistols/glock/01/g1.png', 'img/pistols/glock/01/g2.png', 'img/pistols/glock/01/g3.png', 'img/pistols/glock/01/g4.png', 'img/pistols/glock/01/g5.png', 'img/pistols/glock/01/g6.png', 'img/pistols/glock/01/g7.png',
    // Glock Widok 2
    'img/pistols/glock/02/glock2.png', 'img/pistols/glock/02/g21.png', 'img/pistols/glock/02/g22.png', 'img/pistols/glock/02/g23.png', 'img/pistols/glock/02/g24.png', 'img/pistols/glock/02/g25.png', 'img/pistols/glock/02/g26.png', 'img/pistols/glock/02/g27.png',
    // Glock Widok 3
    'img/pistols/glock/03/glock3.png', 'img/pistols/glock/03/g31.png', 'img/pistols/glock/03/g32.png', 'img/pistols/glock/03/g33.png', 'img/pistols/glock/03/g34.png', 'img/pistols/glock/03/g35.png', 'img/pistols/glock/03/g36.png', 'img/pistols/glock/03/g37.png',
    // CZ
    'img/pistols/cz/cz.png', 'img/pistols/cz/cz1.png', 'img/pistols/cz/cz2.png', 'img/pistols/cz/cz3.png', 'img/pistols/cz/cz4.png',
    // Inne
    'img/other/icon_pistol.png', 'img/other/icon_rifle.png', 'img/other/icon_shotgun.png',
    // Pliki SVG
    'g17.svg','sig.svg','cz.svg'
  ];
  const total=assets.length, bar=document.getElementById("preload-bar"), text=document.getElementById("preload-text"), overlay=document.getElementById("preload-overlay");
  let loaded=0;
  const lang = localStorage.getItem('lang') || 'pl';
  const loadingText = lang === 'pl' ? "Ładowanie" : "Loading";

  const update=()=>{
    loaded++; const pct=Math.min(100,Math.round(loaded/total*100));
    bar.style.width=pct+"%"; text.textContent=loadingText + " " + pct+"%";
    if(loaded>=total){overlay.style.display="none";}
  };
  assets.forEach(src=>{
      const isSvg = src.endsWith(".svg");
      if (isSvg) {
          fetch(src).then(update).catch(update);
      } else {
          const i=new Image(); i.onload=update; i.onerror=update; i.src=src;
      }
  });
  window.addEventListener("load",()=>overlay.classList.add("hidden"));
  setTimeout(()=>overlay.classList.add("hidden"),20000);
});
</script>

<script>
  (function(){
    const ov=document.getElementById('lang-select');
    if (!ov) return;
    const btnPl=document.getElementById('lang-pl');
    const btnEn=document.getElementById('lang-en');
    const heading = document.getElementById('choose-heading');

    function setLanguage(lang){
        document.title = lang === 'pl' ? 'Weapon Wizards – Wybór broni' : 'Weapon Wizards – Choose weapon';
        if (heading) heading.textContent = lang==='pl' ? 'WYBIERZ RODZAJ BRONI' : 'CHOOSE WEAPON TYPE';
        document.querySelector('#btn-pistol img').alt = lang === 'pl' ? 'Pistolet' : 'Pistol';
        document.querySelector('#btn-rifle img').alt = lang === 'pl' ? 'Karabin' : 'Rifle';
        document.querySelector('#btn-shotgun img').alt = lang === 'pl' ? 'Strzelba' : 'Shotgun';
    }
    function choose(lang){
      localStorage.setItem('lang',lang);
      ov.style.display='none';
      setLanguage(lang);
    }
    if (btnPl) btnPl.addEventListener('click',()=>choose('pl'));
    if (btnEn) btnEn.addEventListener('click',()=>choose('en'));
    
    function applyStoredLanguage(){
      const stored=localStorage.getItem('lang');
      if(stored){
        ov.style.display='none';
        setLanguage(stored);
      }
    }
    applyStoredLanguage();
  })();
</script>

</body>
</html>